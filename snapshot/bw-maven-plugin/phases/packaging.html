
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2016-06-06
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Packaging | BWMaven plugin</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="../../css/bootstrap.min.css" rel="stylesheet" />
		<link href="../../css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="../../css/docs.css" rel="stylesheet" />
		<link href="../../css/reflow-skin.css" rel="stylesheet" />


		<link href="../../css/lightbox.css" rel="stylesheet" />

		<link href="../../css/site.css" rel="stylesheet" />
		<link href="../../css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="../../js/html5.js"></script>
		<![endif]-->


		
<link rel="stylesheet" href="../../css/github.min.css"/>
	</head>

	<body class="page-phases-packaging project-bw-maven-plugin" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="brand"><style>.navbar .brand { padding: 5px 20px;}</style><a class="brand" href="http://fastconnect.github.io/tibco-factory/snapshot/index.html"><span class="color-highlight">FC</span> TIBCO Factory</a><span class="brand" style="padding: 5px 5px;">/</span><a class="brand" href="http://fastconnect.github.io/tibco-factory/snapshot/bw-maven-plugin/index.html"><span class="color-highlight">BWMaven</span> plugin</a></div>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../index.html" title="Introduction">Introduction</a></li>
									<li ><a href="../plugin-info.html" title="Goals">Goals</a></li>
									<li ><a href="../usage.html" title="Usage">Usage</a></li>
									<li class="disabled"><a title=""></a></li>
									<li ><a href="../bwmaven-lifecycles.html" title="Lifecycles">Lifecycles</a></li>
									<li ><a href="../mavenization.html" title="Mavenization">Mavenization</a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Lifecycle phases <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="development.html" title="Development">Development</a></li>
									<li class="active"><a href="" title="Packaging">Packaging</a></li>
									<li ><a href="deployment.html" title="Deployment">Deployment</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Reports <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu ">
										<a href="../project-info.html" title="Project Information">Project Information</a>
										<ul class="dropdown-menu">
											<li ><a href="../integration.html" title="Continuous Integration">Continuous Integration</a></li>
											<li ><a href="../dependencies.html" title="Dependencies">Dependencies</a></li>
											<li ><a href="../dependency-info.html" title="Dependency Information">Dependency Information</a></li>
											<li ><a href="../distribution-management.html" title="Distribution Management">Distribution Management</a></li>
											<li ><a href="../issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
											<li ><a href="../license.html" title="Project License">Project License</a></li>
											<li ><a href="../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
											<li ><a href="../team-list.html" title="Project Team">Project Team</a></li>
											<li ><a href="../source-repository.html" title="Source Repository">Source Repository</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="../project-reports.html" title="Project Reports">Project Reports</a>
										<ul class="dropdown-menu">
											<li ><a href="../plugin-info.html" title="Plugin Documentation">Plugin Documentation</a></li>
											<li ><a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="../index.html" id="bannerLeft"><h1>Maven plugin for
          
          <span class="color-highlight"> TIBCO BusinessWorks</span></h1></a>
					<p class="lead">Enable Java-like lifecycle management in TIBCO BusinessWorks</p>
				</div>
				<div class="pull-right">
					<div id="bannerRight"><h1><map id="ALM" name="ALM">
			  <area shape="rect" alt="Development" title="" coords="157,4,254,50" href="./bw-maven-plugin/phases/development.html" target=""/>
			  <area shape="rect" alt="Unit Tests" title="" coords="285,71,383,116" href="./fcunit-plugin/index.html" target=""/>
			  <area shape="rect" alt="Review" title="" coords="308,161,405,207" href="./code-review-plugin/index.html" target=""/>
			  <area shape="rect" alt="Packaging" title="" coords="255,252,353,297" href="./bw-maven-plugin/phases/packaging.html" target=""/>
			  <area shape="rect" alt="Deployment" title="" coords="58,253,156,298" href="./bw-maven-plugin/phases/deployment.html" target=""/>
			  <area shape="rect" alt="Release" title="" coords="5,162,103,208" href="" target=""/>
			  <area shape="rect" alt="Maintenance" title="" coords="30,71,126,116" href="" target=""/>
			</map>
			<img src="./images/ALM.png" alt="" usemap="#ALM" border="0" /></h1></div>
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
				<div class="section"> 
 <div class="page-header">
  <h2 id="Packaging">Packaging</h2>
 </div> 
</div>
			</div>
		</div>
	</div>
	<div class="row columns columns1">
		<div class="span12">
			<p>For a <a href="../bwmaven-lifecycles.html#EAR">TIBCO BusinessWorks project</a>, the packaging is the step that comes right after compilation of the EAR and unit tests.</p>
<p>In fact, deploying a TIBCO BusinessWorks EAR implies to <a href="../extract-xml-from-ear-mojo.html">create a Deployment Descriptor XML file</a>.</p>
<p>Moreover, the packaging step will provide an exclusive syntax to simplify the configuration of TIBCO BusinessWorks applications. To achieve this, the previous XML file will be <a href="../generate-properties-from-xml-mojo.html">converted to properties files</a> that will be easier to edit.</p>
<p>The scope of this page is to describe the <b>files generated by the packaging phase for one TIBCO BusinessWorks project</b> and explain their use in the next phase: deployment.</p>
<p>The generation of a full compressed package with the maven-assembly-plugin is out of the scope.</p>
		</div>
	</div>
	<div class="row">
	</div>
	<div class="row columns columns2">
		<div class="span6">
			<h3 id="XML-based_configuration">XML-based configuration</h3>
<p>The Deployment Descriptor in TIBCO (not necessarly BusinessWorks) is an XML file with a root element called <i>&lt;application&gt;</i> based on a schema with <i><tt>http://www.tibco.com/xmlns/ApplicationManagement</tt></i> namespace.</p>
<div class="source"> 
 <div class="source"> 
  <pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;application xmlns=&quot;http://www.tibco.com/xmlns/ApplicationManagement&quot;
             name=&quot;MyBWProject&quot;&gt;
    ...
    &lt;NVPairs name=&quot;Global Variables&quot;&gt;
        &lt;NameValuePair&gt;
            &lt;name&gt;Connection/JMS/Port&lt;/name&gt;
            &lt;value&gt;7222&lt;/value&gt;
        &lt;/NameValuePair&gt;
    &lt;/NVPairs&gt;
    ...
    &lt;services&gt;
        &lt;bw name=&quot;MyBWProject.par&quot;&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;bindings&gt;
                &lt;binding name=&quot;MyBWProject-1&quot;&gt;
                    &lt;machine&gt;10.8.0.1&lt;/machine&gt;
                    ...
                &lt;/binding&gt;
            &lt;/bindings&gt;
            &lt;NVPairs name=&quot;Runtime Variables&quot;&gt;
                &lt;NameValuePair&gt;
                    &lt;name&gt;Connection/JMS/Port&lt;/name&gt;
                    &lt;value&gt;7223&lt;/value&gt;
                &lt;/NameValuePair&gt;
            &lt;/NVPairs&gt;
            ...
            &lt;bwprocesses&gt;
                &lt;bwprocess name=&quot;JMSInput.process&quot;&gt;
                    &lt;starter&gt;JMS Queue Receiver&lt;/starter&gt;
                    &lt;enabled&gt;true&lt;/enabled&gt;
                    &lt;maxJob&gt;0&lt;/maxJob&gt;
                    &lt;activation&gt;true&lt;/activation&gt;
                    &lt;flowLimit&gt;0&lt;/flowLimit&gt;
                &lt;/bwprocess&gt;
                ...
            &lt;/bwprocesses&gt;
            &lt;isFt&gt;false&lt;/isFt&gt;
        &lt;/bw&gt;
    &lt;/services&gt;
&lt;/application&gt;
</pre> 
 </div> 
</div>
<div class="section">              
</div>
		</div>
		<div class="span6">
			<h3 id="Properties-based_configuration">Properties-based configuration</h3>
<p>In the world of exploitation teams, the standard mechanism to configure a system is to edit (most likely in vi editor) plain text files with <tt>key=value</tt> properties. These files are called properties-based configuration files.</p>
<p>However the TIBCO Deployment Descriptor is XML-based. That’s why this plugin will <a href="../generate-properties-from-xml-mojo.html">convert</a> the <a href="./packaging.html#XML-based_configuration">XML Deployment Descriptor file</a> <a href="../extract-xml-from-ear-mojo.html">extracted from the TIBCO BusinessWorks EAR</a> file to properties-based files:</p>
<ul> 
 <li><b>&lt;application&gt;.gv.properties</b>: to modify the Global Variables</li> 
</ul>
<p>Each <tt>key=value</tt> line of a <i>“.gv.properties”</i> file is the representation of a <b>&lt;NameValuePair&gt;</b> element with a subelement <b>&lt;name&gt;</b> corresponding to the <tt>key</tt> and a subelement <b>&lt;value&gt;</b> corresponding to the <tt>value</tt>. For instance:</p>
<div class="source"> 
 <div class="source"> 
  <pre>Connection/JMS/Port=7222
</pre> 
 </div> 
</div>
<ul> 
 <li><b>&lt;application&gt;.services.properties</b>: to create the service-level configuration such as <tt>bindings</tt>, <tt>processes</tt>…</li> 
</ul>
<p>Each line of a <i>“.services.properties”</i> file is composed of a <tt>key</tt> which has a XPath-like syntax to define element in the TIBCO Deployment Descriptor, relatively to te <i>&lt;services&gt;</i> element.</p>
<p>This syntax will basically be:</p>
<div class="source"> 
 <div class="source"> 
  <pre>&lt;element-name&gt;[@name]/&lt;sub-element-name&gt;/&lt;sub-sub-element-name&gt;=&lt;value&gt;
</pre> 
 </div> 
</div>
<p>For instance:</p>
<div class="source"> 
 <div class="source"> 
  <pre>bw[MyBWProject.par]/bindings/binding[MyBWProject-1]/machine=10.8.0.1


bw[MyBWProject.par]/bindings/variables/variable[Connection/JMS/Port]=7223


bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/starter=JMS Queue Receiver
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/enabled=true
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/maxJob=0
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/activation=true
bw[MyBWProject.par]/bwprocesses/bwprocess[JMSInput.process]/flowLimit=0
</pre> 
 </div> 
</div>
<p>If an element with the name between bracket doesn’t exist, it will be created on-the-fly. Thus, it is possible to create new bindings dynamically in the properties-based files. This custom configuration will be <a href="../generate-xml-from-properties-mojo.html">put back into the TIBCO Deployment Descriptor</a>.</p>
		</div>
	</div>
	<div class="row">
	</div>
	<div class="row columns columns1">
		<div class="span12">
			<h3 id="Configuration_management_lifecycle">Configuration management lifecycle</h3>
<p>Now that we have described all the files generated during the packaging phase for one TIBCO BusinessWorks application, we will see how these files interact before the package is ready to be deployed.</p>
		</div>
	</div>
	<div class="row">
	</div>
	<div class="row columns columns2">
		<div class="span6">
			<h4 id="Package">Package</h4>
<p>The configuration management lifecycle has to address a main issue: synchronize actions of development team and operations team (see <a class="externalLink" href="http://en.wikipedia.org/wiki/DevOps">DevOps wikipedia article</a> for details).</p>
<p>This plugin defines a comprehensive strategy aimed at clearly separating concerns between build time and deployment time:</p>
<ul> 
 <li><b>packaging</b> phase for development team</li> 
 <li><b>deployment</b> phase for operations team</li> 
</ul>
<div class="section">      
</div>
		</div>
		<div class="span6">
			<h4 id="Deployment">Deployment</h4>
<p>Once the packaging step we have three files that will be used by deployment step :</p>
<ul> 
 <li><b>&lt;aplication&gt;.ear</b>: the EAR</li> 
 <li><b>&lt;aplication&gt;-final.xml</b>: the XML Deployment Descriptor with additional configuration set during <b>packaging</b> phase</li> 
 <li><b>pom.xml</b>: a special Maven POM file dedicated to the deployment on a TIBCO domain (with <a href="../bwmaven-lifecycles.html#Deployment">‘bw-ear-deploy’ packaging</a>)</li> 
</ul>
<p>There are also three more files for reference purpose only:</p>
<ul> 
 <li><b>&lt;aplication&gt;.xml</b>: the XML Deployment Descriptor extracted from the EAR</li> 
 <li><b>&lt;aplication&gt;.gv.properties</b>: the properties files for Global Variables</li> 
 <li><b>&lt;aplication&gt;.services.properties</b>: the properties files for services</li> 
</ul>
		</div>
	</div>
	<div class="row">
	</div>
	<div class="row columns columns2">
		<div class="span6">
			<h6></h6>
<p><img src="../images/configuration-lifecycle-packaging.png" alt="The configuration lifecycle for packaging" /></p>
<div class="section">   
</div>
		</div>
		<div class="span6">
			<h6></h6>
<p><img src="../images/configuration-lifecycle-deployment.png" alt="The configuration lifecycle for deployment" /></p>
		</div>
	</div>
	<div class="row">
	</div>
	<div class="row columns columns2">
		<div class="span6">
			<h6></h6>
<ul> 
 <li>At first, the EAR is generated by previous step “compile”. from this EAR a standard Deployment Descriptor XML file is extracted. This file is the one with default configuration set in TIBCO Designer by developers (see <a href="../extract-xml-from-ear-mojo.html">extract-xml-from-ear</a> goal).</li> 
 <li>Then, this XML file is converted to the properties-based syntax described <a href="#Properties-based_configuration">above</a> (see <a href="../generate-properties-from-xml-mojo.html">generate-properties-from-xml</a> goal).</li> 
 <li>Optionally, these properties can be overridden by properties of the “reference” files. These files can be used by developers to put configuration that doesn’t depend on target environment (machines hostnames, DB credentials, JMS credentials…). Usually the “reference” files are stored with the sources on the SCM (see <a href="../generate-properties-from-xml-mojo.html">generate-properties-from-xml</a> goal).</li> 
 <li>The last step is to convert properties-based files back to the XML Deployment Descriptor (see <a href="../generate-xml-from-properties-mojo.html">generate-xml-from-properties</a> goal).</li> 
</ul>
<div class="section">    
</div>
		</div>
		<div class="span6">
			<h6></h6>
<p>The important point to notice is that properties files can be edited before deploying the application. This last configuration edition will be included in the XML before deploying the EAR to TIBCO Domain.</p>
<p>This will be further explained in the <a href="./deployment.html">Deployment phase</a>.</p>
		</div>
	</div>
	<div class="row">
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Overview</li>
						<li >
							<a href="../index.html" title="Introduction">Introduction</a>
						</li>
						<li >
							<a href="../plugin-info.html" title="Goals">Goals</a>
						</li>
						<li >
							<a href="../usage.html" title="Usage">Usage</a>
						</li>
						<li class="disabled">
							<a title=""></a>
						</li>
						<li >
							<a href="../bwmaven-lifecycles.html" title="Lifecycles">Lifecycles</a>
						</li>
						<li >
							<a href="../mavenization.html" title="Mavenization">Mavenization</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Lifecycle phases</li>
						<li >
							<a href="development.html" title="Development">Development</a>
						</li>
						<li class="active">
							<a href="#" title="Packaging">Packaging</a>
						</li>
						<li >
							<a href="deployment.html" title="Deployment">Deployment</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Reports</li>
						<li >
							<a href="../project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="../project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote><i><span class="color-highlight">BW</span>Maven</i>
		          (part of the
		          <i><span class="color-highlight">FC</span> TIBCO Factory</i>)
		          is a lifecycle management tool for TIBCO BusinessWorks based
		          on <a href="http://maven.apache.org" title="Maven">Maven</a>.</blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2011-2016 <a href="http://www.fastconnect.fr">FastConnect SAS</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 2.4.2-SNAPSHOT. </span><span class="publishDate">Last Published: 2016-06-06. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="../../js/jquery.min.js"></script>

	<script src="../../js/bootstrap.min.js"></script>
	<script src="../../js/lightbox.min.js"></script>
	<script src="../../js/reflow-scroll.js"></script>
	
<script src="../../js/highlight.min.js" type="text/javascript"></script>
<script src="../../js/jquery.imagemapster.min.js" type="text/javascript"></script>
<script src="../../js/custom.js" type="text/javascript"></script>
	<script src="../../js/reflow-skin.js"></script>

	</body>
</html>
